%%%%%
%%
%% This file sets up the Mem, MemFold, and MemEnvelope datatypes, and
%% creates possible macros for each.
%%
%% The Mem datatype isn't really used directly; it's there so the
%% other datatypes can inherit and share its code.
%%
%%%%%

\DECLARESUBTYPE{Mem}{Element}
\PRESETS{Mem}{
  %% \MYname is the trigger
  \F\MYtext	%%  text
  }


%%%%%
%% MemFold and MemEnvelope are both subtypes of Mem.  MemFold is for
%% fold-n-staple style mempackets, MemEnvelope is for stuff-n-seal
%% style mempackets.  If you want a mempacket to contain interesting
%% contents, like sheets, abilities, and other mempackets, use a
%% MemEnvelope.
\DECLARESUBTYPE{MemFold}{Mem}
\DECLARESUBTYPE{MemEnvelope}{Mem}


%%%%%
%% MemCover and MemPage are for the cover and pages of mempacket
%% booklets, which resemble research notebooks.  These are good
%% substitutes for large piles of MemFolds, and can be useful for
%% things like amnesiac characters.
%%
%% Like MemFolds, MemPages shouldn't directly own any other elements
%% as contents.  Use MemEnvelope instead.
%%
%% MemPages are usually assigned to a MemCover (via \MYmems), with the
%% MemCover representing the entire booklet and assigned to a
%% character.
%%
%% A MemCover is not a mempacket in and of itself; its name is not its
%% trigger and its text is not a memory.
\DECLARESUBTYPE{MemCover}{Mem}
\PRESETS{MemCover}{
  \sd\MYtext	{Each page is a memory/event packet with a separate
		trigger.}
  }

\DECLARESUBTYPE{MemPage}{Mem}


%%%%%
%% \memfold{<trigger>}{<text>}
%% \memenvelope{<trigger>}{<text>}
%% \memcover{<name>}{<pages>}
%% \mempage{<trigger>}{<text>}
%% \startmembook{<name>} <pages> \endmembook
%%
%% These are wrappers around \INSTANCE, useful as 1-shots.
%% \startmembook...\endmembook is a simple wrapper around \memcover
%% that may have better syntax for use within character sheets (inside
%% a \starttag{mems}...\endtag block).
\newinstance{MemFold}{\memfold[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{MemEnvelope}{\memenvelope[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{MemCover}{\memcover[2]}{
  \s\MYname{#1}\s\MYmems{#2}}
\newinstance{MemPage}{\mempage[2]}{
  \s\MYname{#1}\s\MYtext{#2}}

\long\def\startmembook#1#2\endmembook{\memcover{#1}{#2}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NEW{MemFold}{\mTest}{
  \s\MYname	{Test Trigger}
  \s\MYtext	{This is a Test of a fold-n-staple memory packet}
  }
  
%% Oracle Packets

\NEW{MemCover}{\mOracleMems}{
  \s\MYname	{Clairvoyance Discoveries}
  \s\MYmems	{\mCTruth{}\mCWisdom{}\mCDeath{}\mCWar{}\mCFamine{}\mCPestilence{}\mCLove{}\mCTrickster{}\mCMuscle{}\mCCaregiver{}\mCBeauty{}\mCOutcast{}\mCIngenuity{}\mCTraitor{}\mCHonor{}\mCLoyalty{}}
  }

\NEW{MemPage}{\mCTruth}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00001.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCWisdom}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00002.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCDeath}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00003.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCWar}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00004.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCFamine}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00005.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCPestilence}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00006.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCLove}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00007.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCTrickster}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00008.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCMuscle}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00009.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCCaregiver}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00010.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCBeauty}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00011.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCOutcast}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00012.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCIngenuity}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00013.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCTraitor}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00014.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCHonor}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00015.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mCLoyalty}{
  \s\MYname	{Open when you've used your Clairvoyance ability on the character with badge number 00017.}
  \s\MYtext	{}
  }

%% Famine Ability Envelopes

\NEW{MemEnvelope}{\mGEnvelope}{
  \s\MYname	{E Envelope - Open if told to do so}
  \s\MYtext	{You feel that you're finally on a path that makes sense to you. You are a villain in this story, and now you have a new ability to match that role.}
  \s\MYabils	{\aFleshHunger{}}
  }

\NEW{MemEnvelope}{\mEEnvelope}{
  \s\MYname	{G Envelope - Open if told to do so}
  \s\MYtext	{You feel that you're finally on a path that makes sense to you. You are a hero in this story, and now you have a new ability to match that role.}
  \s\MYabils	{\aJusticeHunger{}}
  }

%% Wise Old Man Past Life Memories

\NEW{MemCover}{\mWiseMems}{
  \s\MYname	{\cWisdom{}'s Memories}
  \s\MYmems	{\mWMemOne{}\mWMemTwo{}\mWMemThree{}\mWMemFour{}\mWMemFive{}}
  }

\NEW{MemPage}{\mWMemOne}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mWMemTwo}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mWMemThree}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mWMemFour}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mWMemFive}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

%% Ingenuity Past Life Memories

\NEW{MemCover}{\mIngenuityMems}{
  \s\MYname	{\cIngenuity{}'s Memories}
  \s\MYmems	{\mIMemOne{}\mIMemTwo{}\mIMemThree{}\mIMemFour{}\mIMemFive{}}
  }

\NEW{MemPage}{\mIMemOne}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mIMemTwo}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mIMemThree}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mIMemFour}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mIMemFive}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

%% Traitor Past Life Memories and Path

\NEW{MemCover}{\mTraitorMems}{
  \s\MYname	{\cTraitor{}'s Memories}
  \s\MYmems	{\mTMemOne{}\mTMemTwo{}\mTMemThree{}\mTMemFour{}\mTMemFive{}}
  }

\NEW{MemPage}{\mTMemOne}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mTMemTwo}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mTMemThree}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mTMemFour}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }

\NEW{MemPage}{\mTMemFive}{
  \s\MYname	{Open when.}
  \s\MYtext	{}
  }


%% P Envelope
\NEW{MemEnvelope}{\mPEnvelope}{
  \s\MYname	{P Envelope - Open if told to do so}
  \s\MYtext	{You're now infected with the Plague! Your CR is now 1 for the next 10 minutes and you should roleplay being sick. You have a strange desire to spread the Plague using the enclosed ability. You are also now immune to catching the Plague again.}
  \s\MYabils	{\aPlague{}\aImmunity{}}
  }
  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

